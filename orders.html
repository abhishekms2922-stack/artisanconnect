<!DOCTYPE html>
<html>

<head>
<title>Artisan Orders</title>
<link rel="stylesheet" href="style.css">
</head>
<script type="module">

import { db } from "./firebase.js";

import {
collection,
getDocs,
doc,
updateDoc
} from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

const container =
document.getElementById("ordersContainer");

async function loadOrders(){

container.innerHTML = "";

const querySnapshot =
await getDocs(collection(db,"orders"));

querySnapshot.forEach((document)=>{

const o = document.data();
const id = document.id;
const statusColor =
o.status === "Accepted" ? "green" : "orange";

container.innerHTML += `
<div style="
background:white;
padding:20px;
margin:15px;
width:260px;
border-radius:10px;
box-shadow:0 4px 10px rgba(0,0,0,0.1);
">

<h3>${o.productName}</h3>

<p><b>Customer:</b> ${o.customerName}</p>

<p><b>Phone:</b> ${o.phone}</p>

<p><b>Address:</b> ${o.address}</p>

<p style="font-weight:bold; color:${statusColor};">
Status: ${o.status}
</p>

<button
onclick="acceptOrder('${id}')"
style="
margin-top:10px;
padding:8px 15px;
border:none;
border-radius:6px;
background:#6a1b9a;
color:white;
cursor:pointer;
">
Accept Order
</button>

</div>
`;

});

}

window.acceptOrder = async function(id){

await updateDoc(doc(db,"orders",id),{
status:"Accepted"
});

alert("Order Accepted âœ…");
loadOrders(); // reload orders instantly

}

loadOrders();
</script>
</body>
</html>
<body>

<div class="navbar">
<h2>ArtisanConnect ðŸ§µ</h2>

<div>
<a href="index.html">Home</a>
<a href="products.html">Products</a>
</div>
</div>

<h2 id="orderTitle" style="text-align:center;margin-top:20px;">
Incoming Orders (0)
</h2>

<div id="ordersContainer"
style="display:flex;flex-wrap:wrap;justify-content:center;">
</div>